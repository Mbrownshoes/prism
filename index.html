<!DOCTYPE html>
<met charset="utf-8">
<style>
#land {
	stroke: #fff;
}
/*#land {
  fill: none;
  stroke: #000;
  stroke-linejoin: round;
}*/

</style>

<!-- <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"> -->
<!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"> -->
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.geo.tile.v0.min.js"></script>

<script src="http://d3js.org/topojson.v1.min.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script>
var width = 960,
	height = 600

var colors = d3.scale.quantize()
	.range(["rgb(69,117,180)", "rgb(116,173,209)", "rgb(171,217,233)", "rgb(224,243,248)", "rgb(255,255,191)", "rgb(254,224,144)", "rgb(253,174,97)", "rgb(244,109,67)", "rgb(215,48,39)", "rgb(165,0,38)"]);

var legend_labels = ["-20", "-15", "-10", "-5", "0", "5", "10", "15", "20", "25"]

// var projection = d3.geo.albers()
// 	.rotate([96, 0]) 
// 	.center([-32, 53.9]) 
// 	.parallels([20, 60]) //dont change
// 	.scale(1970) 
// 	.translate([width / 2, height / 2]);

var path = d3.geo.path()
	.projection(null);

var svg = d3.select("body")
	.append("svg")
	.attr("width", width)
	.attr("height", height);

var legend = svg.selectAll('g.legendEntry')
	.data(colors.range().reverse())
	.enter()
	.append("g").attr('class', 'legendEntry');

var test, allProv, indProv;
d3.json("prov.json", function(error, BC) {
	if (error) return console.log(error);

// 	svg.append("path")
// 		.attr("id", "land")
// 		.datum(topojson.feature(BC, BC.objects.prov))
// 		.attr("d", path)

// 	svg.append("image")
// 		.attr("xlink:href", "band1.jpg")
// 		.attr("height", height)
// 		.attr("class", "bg")
allProv = topojson.feature(BC, BC.objects.prov)
indProv = allProv.features;
// });

// d3.json("prov.json", function(error, BC) {
//   var defs = svg.append("defs");


svg.selectAll("path")
	.data(topojson.feature(BC, BC.objects.prov).features)
	.enter()
	.append("path")
	.attr("d", path)
	.style("fill", function(d){
		if (d.properties.province == "British Columbia") {
			return "none"
		} else { 
			return "#ddd";
		}
	})
	.attr("id", "land");
  // svg.append("path")
  //     .datum(topojson.feature(BC, BC.objects.prov).features)
  //     .attr("d", path)
  //     .style("fill", function(d,i) {
  //     	test = d;
  //     	console.log(i)
  //     	if (d.properties.province == "British Columbia")
  //     		{return "blue"}
      	
  //     });

  svg.append("clipPath")
      .attr("id", "clip")
    .append("use")
      .attr("xlink:href", "#land");

  svg.append("image")
      .attr("clip-path", "url(#clip)")
      .attr("xlink:href", "band1.png")
      .attr("width", width)
      .attr("height", height);

  svg.append("use")
      .attr("xlink:href", "#land");
});
d3.json("newUs.json", function(error, us) {
  var alaskaState = us.objects.states.geometries.filter(function(d) { return d.id === 2; })[0];

  svg.append("path")
      .datum(topojson.feature(us, alaskaState))
      .attr("id", "land")
      .attr("d", path)
      .style("fill","#ddd");

});


var ls_w = 40;

legend
	.append("rect")
	.attr("y", 570)
	.attr("x", function(d, i) {
		return (width - 240) - (i * ls_w) - 2*ls_w;
	})
	.attr("width", ls_w)
	.attr("height", 10)
	.style("fill", function(d) {
		return d;
	});

legend.append("text")
	.attr("y", 590)
	.attr("x", function(d, i) {
		return (width - 240) - (i * ls_w) - ls_w - 4;
	})
	.text(function(d,i) {
	
		console.log(colors.range().length - i-1)
		return legend_labels[colors.range().length - i-1];
	});

</script>











